## 高可用存储
### 双机架构

|  模式   | 优点 | 缺点 | 适合场景 | CAP是否适用 |
|  ----  | ----  | ---- | ----- | ----- |
| 主备复制 | 1.客户端无需感知备机 | 1.备机不提供服务资源浪费 2.故障时需要人工干预恢复 | 内部管理系统 | 否 |
| 主从复制 | 从机提供读服务，主机故障时不影响读业务 | 1.故障时需要人工干预恢复 2.分配机制 3.数据不一致 | 读多写少：新闻、论坛 | 是 |
| 双机切换（主从/主备）| 故障时自动切换 | 主机故障误判 |  | 主从可以 |
| 主主复制 | 故障无需切换 | 双向复制 |  | 是 |

> 由于复制存在延迟，如果在这个延迟内主机挂了，那么会发生数据丢失，这部分丢失的数据在旧主机恢复后可以进行补录。

### 数据集群

#### 集中式数据集群
就是一主多从、一主多备，包括上面的双击架构

复杂度来源
1. 多个复制通道，主机复制压力大
2. 如何监控故障、选主、通知从/备机切换为主机

#### 分散式数据集群
一台机器的存储空间是有限的，当数据规模已经超过一台机器所能存储的范围，就要考虑使用分散式数据集群。


### 数据分区
双机架构、集群集群都是基于硬件故障的场景考虑和设计的，对于一些大的自然灾害，可以会导致一个地区所有的硬件都发生故障，发生数据丢失。

为了避免这种情况，要基于代理级别的故障来考虑和设计高可用架构，这就是数据分区产生的背景。

- 集中式
- 互备式
- 独立式

## 高可用计算

复杂度：当任务执行失败后如何分配给新的服务器。

1. 主备：热备和冷备
2. 主从
3. 集群：对称集群、非对称集群