## 序言
单服务器高性能的关键之一就是服务器采用的并发模型，并发模型有两个关键设计点：
1. 服务器如何管理连接
2. 服务器如何处理请求

以上两个设计点最终都和操作系统的 I/O 模型和进程模型有关。

- I/O 模型：阻塞、非阻塞、同步、异步
- 进程模型：单进程、多进程、多线程


### PPC
每个连接一个进程处理，即 `Process Per Connection`。

#### 优点
实现简单，比较适合服务器连接数每那么多的情况，例如数据库服务器。

#### 缺点

1. fork代价高：可以通过提前创建好规避
2. 父子进程通信复杂：可以通过使用线程规避
3. 支持的并发连接数有限：一般百级

所以这种并发模式在互联网兴起之后，并不多用。

### TPC
每个连接一个线程处理，即`Thread Per Connection`。


#### 解决的问题
PPC并发模式父子进程通信复杂

#### 引入的新问题
1. 共享内存，死锁问题
2. 某个线程出现异常，可能导致整个进程退出

### Reactor
主要应用的技术

- I/O多路复用：提高连接数
- 资源池：复用CPU资源

#### 实现方案
1. 单Reactor+单进程/线程：Redis
2. 单Reactor+多线程：常用于互联网高性能服务器应用
3. 多Reactor+多进程/线程：Nginx

#### 解决的问题
PPC和TPC最多支持的连接数少，且CPU资源不可复用（每个连接一个进程/线程）


### Proactor
`Reactor`模型是同步非阻塞模型，`Proactor`是异步非阻塞模型。

异步模型理论上要比同步模型性能要好。

目前是有 Windows 平台实现了真正的异步 I/O：`IOCP`。


## 小结
对性能的追求，推动了并发模型的不断演进。